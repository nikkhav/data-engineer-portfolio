# Структура Data Lake
## Слои
1. Staging: ```/user/nikkhav/project/geo/staging```. <br/> Сырые данные, загруженные из источников.
2. CDM: ```/user/nikkhav/project/geo/cdm```. <br/> Готовые к использованию данные для аналитики и отчетности.

## Источники данных
1. Events: ```/user/master/data/events```. <br/> Сырые события с гео-данными.
2. Geo: ```/user/nikkhav/data/geo```. <br/> Гео-данные с координатами городов.

Все данные организованы по директориям и файлам в формате Parquet для эффективного хранения и обработки.

## Частота обновления
- Ежедневное обновление данных в Staging слое.
- Еженедельное обновление данных в CDM слое. (?) нужно уточнить как часто требуется обновление

### Витрины данных
1. #### Витрина пользователей (user_geo_mart)
- user_id - уникальный идентификатор пользователя
- act_city - город последнего сообщения
- home_city - город, где пользователь был > 27 дней
- travel_count - число посещений городов
- travel_array - порядок посещений
- local_time - локальное время последнего события

2. #### Витрина в разрезе зон (zone_geo_mart)
- month - месяц
- week - неделя
- zone_id - идентификатор зоны
- week_message - число сообщений за неделю
- week_reaction - число реакций за неделю
- week_subscription - число подписок за неделю
- week_user - число регистраций за неделю
- month_message - число сообщений за месяц
- month_reaction - число реакций за месяц
- month_subscription - число подписок за месяц
- month_user - число регистраций за месяц

3. #### Витрина для рекомендации друзей (friend_recommendations_mart)
- user_left - первый пользователь
- user_right - второй пользователь
- processed_dttm - дата расчёта витрины
- zone_id - идентификатор зоны (город)
- local_time - локальное время события